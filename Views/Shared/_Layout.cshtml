@model IEnumerable<LawnMowingService.Models.Booking>
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor

@{
    var userName = HttpContextAccessor.HttpContext.Session.GetString("UserName") ?? "Guest";
    var userRoles = HttpContextAccessor.HttpContext.Session.GetString("UserRoles") ?? "User";
}


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewData["Title"] - Lawn Mowing Service</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="~/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
</head>
<body class="bg-gradient-to-r from-green-300 via-blue-400 to-blue-600 min-h-screen flex flex-col justify-between text-gray-800">

    <!-- Header Section -->
    <header class="p-6 bg-gradient-to-r from-green-500 to-blue-600 text-white shadow-lg">
        <nav class="container mx-auto flex justify-between items-center">
            <img src="/images/logo.png" alt="Lawn Mowing Service Logo" class="h-16 animate__animated animate__fadeInLeft" />
            <span class="text-2xl text-black font-extrabold text-black ml-4">Lawn Mowing Service</span>
            <div class="flex space-x-6 animate__animated animate__fadeInRight">
                <a href="/" class="text-lg px-3 py-2 text-black rounded-lg @(ViewContext.RouteData?.Values["controller"]?.ToString() == "Home" ? "bg-blue-700 text-white" : "hover:text-white hover:bg-blue-700") transition duration-300">Home</a>
                
                @if (userRoles != null && userRoles.Equals("Admin"))
                {
                    <a href="/ConflictManager/ConflictManagementDashboard" class="text-lg px-3 py-2 text-black rounded-lg @(ViewContext.RouteData?.Values["controller"]?.ToString() == "ConflictManager" ? "bg-blue-700 text-white" : "hover:text-white hover:bg-blue-700") transition duration-300">Dashboard</a>
                }

                @if (userRoles != null && userRoles.Equals("Operator"))
                {
                    <a href="/Operator/Dashboard" class="text-lg px-3 py-2 text-black rounded-lg @(ViewContext.RouteData?.Values["controller"]?.ToString() == "Operator" ? "bg-blue-700 text-white" : "hover:text-white hover:bg-blue-700") transition duration-300">Dashboard</a>
                }
                @if (userRoles != null && (userRoles.Equals("User") || userRoles.Equals("Customer")))
                {
                    <a href="/Booking/Create" class="text-lg px-3 py-2 text-black rounded-lg @(ViewContext.RouteData?.Values["action"]?.ToString() == "Create" && ViewContext.RouteData?.Values["controller"]?.ToString() == "Booking" ? "bg-blue-700 text-white" : "hover:text-white hover:bg-blue-700") transition duration-300">Create Booking</a>
                    <a href="/Booking/History" class="text-lg px-3 py-2 text-black rounded-lg @(ViewContext.RouteData?.Values["action"]?.ToString() == "History" && ViewContext.RouteData?.Values["controller"]?.ToString() == "Booking" ? "bg-blue-700 text-white" : "hover:text-white hover:bg-blue-700") transition duration-300">Booking History</a>
                }
                @if (User.Identity.IsAuthenticated)
                {
                     <span class="text-lg text-black">Welcome, @userName!</span>
                    <form asp-controller="Account" asp-action="Logout" method="post" style="display:inline;">
                        @Html.AntiForgeryToken()
                        <a href="/" type="submit" class="text-lg px-3 py-2 text-black rounded-lg hover:text-white hover:bg-blue-700 transition duration-300">Logout</a>
                    </form>
                }
                else
                {
                    <a href="/Account/Login" class="text-lg px-3 py-2 text-black rounded-lg hover:text-white hover:bg-blue-700 transition duration-300">Login</a>
                }
                
            </div>
        </nav>
    </header>

    <!-- Main Content Section -->
    <main class="flex-grow container mx-auto p-6 bg-white rounded-lg shadow-md mt-6 mb-6">
        @RenderBody() <!-- This is where the content of each view will be injected -->
    </main>

    <!-- Footer Section -->
    <footer class="p-4 bg-gray-100 text-center text-gray-600 shadow-inner">
        <p class="text-sm">&copy; 2024 Lawn Mowing Service. All rights reserved.</p>
    </footer>
</body>
</html>
